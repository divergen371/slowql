# 追加機能の検討案

MVP（Minimum Viable Product）の次のステップ、あるいは余裕があれば今回のスコープに含めることができる追加機能の案です。

## 1. 分析・フィルタリング機能の強化

- **期間フィルタリング (`--since`, `--until`)**
  - ログ全体ではなく、特定の時間帯（例: 障害発生時刻前後）のみを解析対象とする機能。
- **ユーザー/ホスト別集計**
  - クエリ単位だけでなく、どのユーザーやクライアント IP からの負荷が高いかを集計するモード。
- **閾値フィルタ (`--min-time`)**
  - 解析対象とする最小実行時間を CLI で上書き設定する機能（ログ自体の設定とは別に）。

## 2. 出力・レポートの強化

- **HTML レポート出力**
  - `pt-query-digest` のように、グラフやヒストグラムを含むリッチな HTML レポートを生成。
  - 実行時間の分布を視覚的に確認できるようにする。
- **Markdown レポート出力**
  - GitHub の Issue や Pull Request にそのまま貼り付けられる形式での出力。
- **Diff モード**
  - 2 つのログファイル（例: インデックス追加前と追加後）を比較し、性能改善・悪化をレポートする機能。

## 3. 利便性・安全性

- **機密情報のマスキング（Anonymization）**
  - ログを外部（開発ベンダーなど）に共有する際、テーブル名やカラム名をハッシュ化したり、リテラルを完全に隠蔽したりする機能。
- **インタラクティブモード (TUI)**
  - ターミナル上で `top` コマンドのように、ソート順を切り替えたり詳細をドリルダウンしたりできる UI。

## 4. 高度な機能

- **`EXPLAIN` 自動実行**
  - DB 接続情報を渡し、抽出されたスロークエリに対して自動的に `EXPLAIN` を実行して実行計画を取得・添付する機能。
- **アドバイス機能**
  - 「インデックスが使われていない可能性があります」や「`SELECT *` は避けてください」といった簡易的な静的解析アドバイス。
